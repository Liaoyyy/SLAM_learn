# 后端
## 概述
后端主要负责数据的再次处理(滤波等)以最大化估计的当前状态的概率，目前主要有两种方法：
1. 非线性卡尔曼滤波（基于马尔科夫性假设）
2. 非线性优化（认为当前状态与之前所有状态均有关）--SLAM主流

## 线性系统和KF
线性高斯系统可以用运动方程+观测方程描述
$$
\begin{cases}
x_k= A_k x_{k-1}+u_k+w_k\\
z_k = C_k x_k + v_k
\end{cases}
$$
其中$x_k$为$k$时刻状态向量，$u_k$为输入，$z_k$为观测器观测值，$w_k,v_k$为服从零均值高斯分布的随机噪声

## 滑动窗口滤波与优化
*单纯BA随着时间推移规模会越来越大，路标点越来越多，考虑仅保留离当前时刻最近的N个关键帧的数据或类似思路的有限个关键帧*

增加一个新关键帧时

- 新增一个关键点：
  滑动窗口已经建立了N个关键帧，新增1个关键帧获得N+1个关键帧和更多路标点的几何，可按照正常BA流程获得N+1个关键帧的结果
- 再删除一个旧的关键帧
  **对一个多元分布，如果我们想去除一个元的影响，可对这个元固定得到剩下变量的条件分布（即对这个元进行边缘化）**
  同样的，我们可以先求得N+1的Hessian矩阵，再进行Schur消元得到除去不想要的关键帧，得到N阶Hessian阵，进一步迭代优化